# Web (Astro) Development Dockerfile
# Supports hot reload with Astro dev server

FROM oven/bun:1.1
WORKDIR /app

# Copy workspace files
COPY package.json bun.lock* ./
COPY packages/shared/package.json ./packages/shared/
COPY packages/web/package.json ./packages/web/

# Install dependencies
RUN bun install

# Copy source (will be overwritten by volume mount)
COPY packages/shared ./packages/shared
COPY packages/web ./packages/web

WORKDIR /app/packages/web

EXPOSE 4321

# Astro dev server with host flag for Docker
CMD ["bun", "run", "astro", "dev", "--host", "0.0.0.0"]
